<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Грудная клетка</title>
  <link rel="stylesheet" type="text/css" href="view.css" media="all">
  <script type="text/javascript" src="view.js"></script>
  <link rel="stylesheet" type="text/css" href="msfmultiselect.css" />
  <script src="msfmultiselect.js"></script>





  <script>
    function testVariable() {
      debugger

      let result_list = [];
      if (document.getElementById("list").length > 0) {
        for (let i = 0; i < document.getElementById("list").length; i++) {
          let option = document.getElementById("list").options[i];
          if (option.selected) {
            result_list += option.value;
          }
        }
      }

      proekcia = [
        "Выполнены рентгенограммы органов грудной клетки в прямой и правой боковой проекциях",
        "Выполнены рентгенограммы органов грудной клетки в прямой и левой боковой проекциях",
        "Выполнена рентгенограмма органов грудной клетки в прямой проекции"
      ];

      bones_list_def = [
        "грудной отдел позвоночника легко сколиотически деформирован",
        "грудной отдел позвоночника сколиотически деформирован",
      ]

      bones_list_trav = [
        "консолидированные переломы ребер VI, VII, VIII справа, VI, VII, VIII слева",
        "консолидированный перелом VI ребра справа"
      ]


      ris = ["не изменён", "без особенностей", "компримирован", "усилен в прикорневых отделах"];

      ris2 = ["небольшого пневмофиброза в базальных отделах", "умеренного пневмофиброза в базальных отделах", "центрального венозного застоя", "интерстициального компонента"];

      kor3_list = ["уплотнены", "с нечёткими и неровными контурами", "с полицикличными контурами"]

      conf_cardio_list = ["аортальная", "митральная", "трапециевидная", "шаровидная"];


      add_list = [
        "С обеих сторон неравномерно уплотнена апикальная плевра",
        "С обеих сторон затенена апикальная плевра",
        "Обызвествеление реберных хрящей",
        "Состояние после оперативного вмешательства"
      ];


      let proekcia_itog = "";
      if (result_list.includes("front_r")) {
        proekcia_itog = proekcia[0];
      } else if (result_list.includes("front_l")) {
        proekcia_itog = proekcia[1];
      } else {
        proekcia_itog = proekcia[2];
      }

      proekcia_itog += ". ";


      let bones_forma = "Грудная клетка обычной формы";
      let bones_deform = "костных деформаций";
      let bones_trav = "травматических изменений не обнаружено";
      let bones_deg = "";

      for (i = 0; i < bones_list_def.length; ++i) {
        if (result_list.includes(bones_list_def[i])) {
          bones_deform = bones_list_def[i];
        }
      }

      for (i = 0; i < bones_list_trav.length; ++i) {
        if (result_list.includes(bones_list_trav[i])) {
          bones_trav = bones_list_trav[i];
        }
      }

      if (result_list.includes("bones_deg")) {
        bones_deg = "дегенеративно-дистрофические изменения грудного отдела позвоночника";
        bones_trav += ", ";
      }

      let bones_itog = bones_forma + ", " + bones_deform + ", " + bones_trav + bones_deg + ". ";


      let polya_0 = "Легочные поля симметрично пневматизированы, обычных размеров. ";


      let polya_start = "В видимых отделах легких"
      let ochag_itog;
      let inf_itog;
      let polya_comma = ", ";

      if (result_list.includes("ochag_upl")) {
        ochag_itog = "плотная очаговая тень в среднем отделе правого легкого";
      } else if (result_list.includes("ochag_zat")) {
        ochag_itog = "очаговое затенение в проекции s8 левого легкого";
      } else {
        ochag_itog = "без очаговых"
        if (result_list.includes("sgush") || result_list.includes("neo")) {
          ochag_itog = "без очаговых изменений";
        }
      }


      if (result_list.includes("sgush")) {
        inf_itog = "сгущение в медиобазальном отделе левого легкого";
      } else if (result_list.includes("neo_snizh")) {
        inf_itog = "неоднородное снижение пневматизации в проекции s6 левого";
      } else if (result_list.includes("neo_upl")) {
        inf_itog = "неоднородные уплотнения легочной ткани в проекции s6 правого";
      } else {
        if (ochag_itog.includes("без очаговых")) {
          inf_itog = "и инфильтративных изменений";
          polya_comma = " ";
        } else {
          inf_itog = "без видимых инфильтративных изменений";
        }
      }

      polya_itog = polya_start + " " + ochag_itog + polya_comma + inf_itog + ". ";


      let ris_itog1 = "";
      let ris_itog2 = "";
      let ris_start = "Лёгочный рисунок ";
      let ris_comma = ", ";
      let ris_izm = "";

      if (result_list.includes("bezos")) {
        ris_itog1 = ris[1] + ris_comma;
      } else if (!result_list.includes("bezos")) {
        if (result_list.includes("komp")) {
          ris_itog1 += ris[2] + ris_comma;
        }
        if (result_list.includes("usil")) {
          ris_itog1 += ris[3] + ris_comma;
        }
        if (result_list.includes("um_pnev")) {
          ris_itog2 += ris2[1] + ris_comma;
          ris_izm = "изменён за счёт ";
        }
        if (result_list.includes("zastoy")) {
          ris_itog2 += ris2[2] + ris_comma;
          ris_izm = "изменён за счёт ";
        }
        if (result_list.includes("inter")) {
          ris_itog2 += ris2[3] + ris_comma;
          ris_izm = "изменён за счёт ";
        }
        else if (ris_itog1 == "" && ris_itog2 == "") {
          ris_itog1 = ris[0] + ris_comma;
          ris_izm = "";
        }
      }

      ris_itog = ris_start + ris_itog1 + ris_izm + ris_itog2;
      ris_itog = ris_itog.replace(/,(?![^,]*,)/m, '.');


      let kor_start = "Корни легких расположены обычно";
      let kor1 = "";
      let kor2 = "";
      let kor3 = "";
      let kor_comma = ", ";
      let kor_side = "";
      let kor_itog;

      if (result_list.includes("kor_um")) {
        kor1 = "умеренно расширены";
      } else if (result_list.includes("kor_ras")) {
        kor1 = "расширены";
      } else {
        kor1 = "не расширены";
      }

      if (result_list.includes("str_soh")) {
        kor2 = "структура сохранена";
      } else if (result_list.includes("malo")) {
        kor2 = "малоструктурные";
      } else if (result_list.includes("nestr")) {
        kor2 = "неструктурные";
      } else {
        kor2 = "структурные";
      }

      for (i = 0; i < kor3_list.length; ++i) {
        if (result_list.includes(kor3_list[i])) {
          kor3 += kor3_list[i] + ", ";
        }
      }

      if (result_list.includes("kor_right")) {
        kor_side = "справа";
      } else if (result_list.includes("kor_left")) {
        kor_side = "слева";
      }

      if (kor3 == "" && kor_side == "") {
        kor_comma = ". ";
      }

      if (kor_side > "" && kor3 == "") {
        kor_comma = " ";
      }

      if (kor_side == "") {
        kor_itog = kor_start + ", " + kor1 + ", " + kor2 + kor_comma + kor3.replace(/,(?![^,]*,)/m, '.');
      } else {
        kor_itog = kor_start + ", " + kor1 + ", " + kor2 + kor_comma + kor3.replace(/,(?![^,]*,)/m, '') + kor_side + ". ";
      }

      let sred_start = "Средостение";
      let sred1 = "";
      let sred2 = "";
      let sred_side = "";
      let sred_finish = "с чёткими контурами,";

      if (result_list.includes("sred_right")) {
        sred_side = "вправо";
      } else if (result_list.includes("sred_left")) {
        sred_side = "влево";
      }

      if (result_list.includes("sred_ras")) {
        sred1 = "расширено";
        if (sred_side != "") {
          sred1 += " " + sred_side;
        }
      } else {
        sred1 = "не расширено";
      }
      sred1 += ", ";

      if (result_list.includes("sred_smesh")) {
        sred2 = "смещено";
        if (sred_side != "") {
          sred2 += " " + sred_side;
        }
      } else {
        sred2 = "не смещено";
      }

      sred2 += ", ";

      sred_itog = sred_start + " " + sred1 + sred2 + sred_finish.replace(/,(?![^,]*,)/m, '. ');

      let conf_cardio = "";
      let conf_cardio_start = "Конфигурация сердечно-сосудистой тени";
      let conf_cardio_itog;

      for (i = 0; i < conf_cardio_list.length; ++i) {
        if (result_list.includes(conf_cardio_list[i])) {
          conf_cardio = conf_cardio_list[i] + ", ";
        }
      }

      if (conf_cardio == "") {
        conf_cardio = "обычная" + ", ";
      }

      conf_cardio_itog = conf_cardio_start + " " + conf_cardio;







      document.getElementById("show").innerText = proekcia_itog + bones_itog + polya_0 + polya_itog + ris_itog + kor_itog + sred_itog + conf_cardio_itog;

      // pro_okno = document.getElementById("pro").innerHTML;

    }


  </script>





</head>

<body id="main_body">

  <div id="form_container">

    <div id="form_item_1">



      <form id="form_48871" class="appnitro" method="post" action="">
        <div class="form_description">
          <h2>Грудная клетка</h2>
          <p><!-- description --></p>
        </div>

        <div class="my_container">


          <div class="my_card">
            <select class="form-control" id="list" name="list" multiple>
              <option value="front_r">ПРЯМАЯ ПРАВАЯ</option>
              <option value="front_l">ПРЯМАЯ ЛЕВАЯ</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="bones_deg">ДЕГ</option>
              <option value="грудной отдел позвоночника легко сколиотически деформирован">ЛЕГ СКОЛ</option>
              <option value="грудной отдел позвоночника сколиотически деформирован">СКОЛ</option>
              <option value="консолидированный перелом VI ребра справа">КОНС</option>
              <option value="консолидированные переломы ребер VI, VII, VIII справа, VI, VII, VIII слева">КОНС МН
              </option>
              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="ochag_upl">ОЧАГ</option>
              <option value="ochag_zat">ОЧАГ ЗАТ</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="sgush">СГУЩ</option>
              <option value="neo_snizh">НЕО СНИЖ</option>
              <option value="neo_upl">НЕО УПЛ</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="bezos">БЕЗ ОСОБ</option>
              <option value="komp">КОМП</option>
              <option value="usil">УСИЛ</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="um_pnev">УМ пнев</option>
              <option value="zastoy">ЗАСТОЙ</option>
              <option value="inter">ИНТЕР</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="kor_um">УМ РАС</option>
              <option value="kor_ras">РАС</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="str_soh">СТР СОХ</option>
              <option value="malo">МАЛО</option>
              <option value="nestr">НЕ СТР</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="уплотнены">УПЛ</option>
              <option value="с нечёткими и неровными контурами">НЕЧ НЕР</option>
              <option value="с полицикличными контурами">ПОЛИЦ</option>
              <option value="kor_right">СПРАВА</option>
              <option value="kor_left">СЛЕВА</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="sred_ras">СРЕД РАС</option>
              <option value="sred_smesh">СРЕД СМЕЩ</option>
              <option value="sred_right">ВПРАВО</option>
              <option value="sred_left">ВЛЕВО</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="аортальная">АОРТ</option>
              <option value="митральная">МИТР</option>
              <option value="трапециевидная">ТРАП</option>
              <option value="шаровидная">ШАР</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="cardio_um_ras">УМ РАС</option>
              <option value="cardio_ras">РАС</option>
              <option value="cardio_vir_ras">ВЫР РАС</option>
              <option value="cardio_rez_ras">РЕЗ РАС</option>
              <option value="cardio_l">ВЛЕВО</option>
              <option value="cardio_pop">В ПОП</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="ao_bezos">БО</option>
              <option value="ao_ud">УД</option>
              <option value="ao_frag">ФРАГ</option>
              <option value="ao_calc">КАЛЬЦ</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="ao_bezos">БО</option>
              <option value="ao_ud">УД</option>
              <option value="ao_frag">ФРАГ</option>
              <option value="ao_calc">КАЛЬЦ</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="pneumo">СВОБ ГАЗ</option>
              <option value="hydro">ГИДРО</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="kup_vishe_right">ВЫШЕ СПРАВА</option>
              <option value="kup_vishe_left">ВЫШЕ СЛЕВА</option>
              <option value="kup_dost">ДОСТ</option>
              <option value="kup_nech_ner">НЕЧ НЕР</option>
              <option value="kup_nez_rel">НЕЗ РЕЛ</option>
              <option value="kup_rel">РЕЛ</option>
              <option value="kup_spa">СПА</option>
              <option value="kup_right">СПРАВА</option>
              <option value="kup_left">СЛЕВА</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="sin_obl">ОБЛИТ</option>
              <option value="sin_zaten">ЗАТ</option>
              <option value="sin_later">ЛАТ</option>
              <option value="sin_lat_zad">ЛАТ и ЗАД</option>
              <option value="sin_right">СПРАВА</option>
              <option value="sin_left">СЛЕВА</option>
              <option value="sin_oba">ОБА</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="С обеих сторон неравномерно уплотнена апикальная плевра">АПИК</option>
              <option value="С обеих сторон затенена апикальная плевра">АПИК ЗАТ</option>
              <option value="Обызвествеление реберных хрящей">ХРЯЩ</option>
              <option value="Состояние после оперативного вмешательства">ОПЕР</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="cvk_centr">ЦВК</option>
              <option value="cvk_dial">ДИАЛ КАТ</option>
              <option value="cvk_pp">ПП</option>
              <option value="cvk_podkl_plecheg">ПОДКЛ ПЛЕЧЕГ</option>

              <option value="eks">ЭКС</option>
              <option value="eks2x">ЭКС 2х</option>
              <option value="eks_left">СЛЕВА</option>
              <!-- дистальные концы электродов в проекции правых камер сердца. -->

              <option value="aksh">АКШ</option>
              <option value="aksh_cardio">ХИР КЛИПС</option>

              <option disabled>▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎▪︎</option>

              <option value="conc_pat">ПАТ</option>
              <option value="conc_svej_pat">СВЕЖ ПАТ</option>
              <option value="conc_pred">ПРЕД</option>
              <option value="conc_um_cardio">УМ КАРД</option>
              <option value="conc_voz">ВОЗ</option>
              <option value="conc_post">ПОСТ</option>
            </select>
          </div>

        </div>


      </form>


    </div>





    <div id="form_item_2">


      <div class="page">
        <nav class="page__menu menu">
          <ul class="menu__list r-list">
            <li class="menu__group"><a href="thorax.html" class="menu__link r-link text-underlined">ОГК</a></li>
            <li class="menu__group"><a href="knee.html" class="menu__link r-link text-underlined">КОЛЕНО</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
          </ul>
        </nav>
      </div>


      <li class="buttons">
        <input type="hidden" name="form_id" value="48871" />
        <input id="saveForm" class="button_text" type="submit" name="submit" value="Вывод" onclick="testVariable()" />
      </li>


      <textarea variable="yname" id="show" class="mytextarea" rows="20" cols="70"></textarea>



    </div>






  </div>



</body>

<script>

  var list = new MSFmultiSelect(
    document.querySelector('#list'),
    {
      theme: 'theme2',
      selectAll: true,
      searchBox: true,
      width: '700px',
      height: '80px',
      // readOnly: true,
      onChange: function (checked, value, instance) {
        console.log(checked, value, instance);
      },
      // appendTo: '#myselect',
      autoHide: false
    }
  )



</script>



</html>