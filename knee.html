<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Тест</title>
  <link rel="stylesheet" type="text/css" href="view.css" media="all">
  <script type="text/javascript" src="view.js"></script>
  <link rel="stylesheet" type="text/css" href="msfmultiselect.css" />
  <script src="msfmultiselect.js"></script>





  <script>
    function testVariable() {
      debugger



      let result_list = [];
      if (document.getElementById("list").length > 0) {
        for (let i = 0; i < document.getElementById("list").length; i++) {
          let option = document.getElementById("list").options[i];
          if (option.selected) {
            result_list += option.value;
          }
        }
      }



      proekcia = [
        "На обзорных рентгенограммах левого коленного сустава в двух проекциях",
        "На обзорных рентгенограммах правого и левого коленных суставов в прямой проекции",
        "На обзорных рентгенограммах правого и левого коленных суставов в двух проекциях",
        "На обзорных рентгенограммах правого коленного сустава в двух проекциях"
      ];

      kti = ["данных за костные травматические и деструктивные изменения не получено"];
      min = ["минимально снижена", "умеренно снижена", "снижена", "выражено снижена", "сохранена"];
      kong = ["Суставные поверхности конгруэнтные"];
      shel = ["легко сужена", "умеренно сужена", "сужена", "выражено сужена", "не сужена"];
      kray = ["визуализируются", "минимальные", "умеренные", "выраженные", "не визуализируются"];

      zao = ["межмыщелковых возвышений", "медиального межмыщелкового возвышения", "медиальных межмыщелковых возвышений"];

      zao_nadk = ["по краям надколенника", "по краям надколенников"];



      let proekcia_itog = "";
      if (result_list.includes("left_2x")) {
        proekcia_itog = proekcia[0] + " ";
      } else if (result_list.includes("left_right_1x")) {
        proekcia_itog = proekcia[1] + " ";
      } else if (result_list.includes("left_right_2x")) {
        proekcia_itog = proekcia[2] + " ";
      } else {
        proekcia_itog = proekcia[3] + " ";
      }

      let min_itog = "";
      let min_start = "Минеральная плотность костей ";
      if (result_list.includes("min_min")) {
        min_itog = min_start + min[0] + ". ";
      } else if (result_list.includes("min_um")) {
        min_itog = min_start + min[1] + ". ";
      } else if (result_list.includes("min_sniz")) {
        min_itog = min_start + min[2] + ". ";
      } else if (result_list.includes("min_vir")) {
        min_itog = min_start + min[3] + ". ";
      } else {
        min_itog = min_start + min[4] + ". ";
      }

      let shel_itog = "";
      let shel_start = "Рентгеновская суставная щель ";
      if (result_list.includes("shel_leg")) {
        shel_itog = shel_start + shel[0] + ". ";
      } else if (result_list.includes("shel_um")) {
        shel_itog = shel_start + shel[1] + ". ";
      } else if (result_list.includes("shel_suz")) {
        shel_itog = shel_start + shel[2] + ". ";
      } else if (result_list.includes("shel_vir")) {
        shel_itog = shel_start + shel[3] + ". ";
      } else {
        shel_itog = shel_start + shel[4] + ". ";
      }

      let kray_itog = "";
      let kray_start = "Краевые костные разрастания ";
      if (result_list.includes("kray_viz")) {
        kray_itog = kray_start + kray[0] + ". ";
      } else if (result_list.includes("kray_min")) {
        kray_itog = kray_start + kray[1] + ". ";
      } else if (result_list.includes("kray_um")) {
        kray_itog = kray_start + kray[2] + ". ";
      } else if (result_list.includes("kray_vir")) {
        kray_itog = kray_start + kray[3] + ". ";
      } else {
        kray_itog = kray_start + kray[4] + ". ";
      }


      let zao_itog = "";
      let zao_start = "Заострения ";
      if (result_list.includes("zao_mezh")) {
        zao_itog = zao_start + zao[0] + ". ";
      } else if (result_list.includes("zao_med")) {
        if (proekcia_itog == proekcia[1] + " " || proekcia_itog == proekcia[2] + " ") {
          zao_itog = zao_start + zao[2] + ". ";
        } else {
          zao_itog = zao_start + zao[1] + ". ";
        }
      }
      // продолжить с надколенниками чтобы добавлялся когда надо и убирался также зависел от проекции


      // <p>Субхондральный склероз не определяется.</p>
      // <p>Заключение: рентген-данных за патологические изменения правого коленного сустава не получено.</p>





      // pro_okno = document.getElementById("pro").innerHTML;
      document.getElementById("show").innerText = proekcia_itog + kti + ". " + min_itog + kong + ". " + shel_itog + kray_itog + zao_itog;



    }



  </script>





</head>

<body id="main_body">

  <div id="form_container">

    <div id="form_item_1">



      <form id="form_48871" class="appnitro" method="post" action="">
        <div class="form_description">
          <h2>Коленный сустав</h2>
          <p><!-- description --></p>
        </div>

        <div class="my_container">


          <div class="my_card">
            <select class="form-control" id="list" name="list" multiple>
              <option value="left_2x">левого в двух</option>
              <option value="left_right_1x">правого и левого в прямой</option>
              <option value="left_right_2x">правого и левого в двух</option>
              <option value="min_min">мин снижена</option>
              <option value="min_um">ум снижена</option>
              <option value="min_sniz">снижена</option>
              <option value="min_vir">выр снижена</option>
              <option value="shel_leg">легко сужена</option>
              <option value="shel_um">ум сужена</option>
              <option value="shel_suz">сужена</option>
              <option value="shel_vir">выр сужена</option>
              <option value="kray_viz">краевые виз</option>
              <option value="kray_min">краевые мин</option>
              <option value="kray_um">краевые ум</option>
              <option value="kray_vir">краевые выр</option>
              <option value="zao_mezh">зао межмыщ</option>
              <option value="zao_med">зао мед межмыщ</option>
              <option value="zao_nadk">зао надк</option>
            </select>
          </div>

        </div>






      </form>



    </div>





    <div id="form_item_2">


      <div class="page">
        <nav class="page__menu menu">
          <ul class="menu__list r-list">
            <li class="menu__group"><a href="thorax.html" class="menu__link r-link text-underlined">ОГК</a></li>
            <li class="menu__group"><a href="knee.html" class="menu__link r-link text-underlined">КОЛ</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">Option #3</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">Option #4</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">Option #5</a></li>
          </ul>
        </nav>
      </div>


      <li class="buttons">
        <input type="hidden" name="form_id" value="48871" />
        <input id="saveForm" class="button_text" type="submit" name="submit" value="Вывод" onclick="testVariable()" />
      </li>




      <textarea variable="yname" id="show" class="mytextarea" rows="20" cols="70"></textarea>




    </div>






  </div>



</body>

<script>

  var list = new MSFmultiSelect(
    document.querySelector('#list'),
    {
      theme: 'theme2',
      selectAll: true,
      searchBox: true,
      width: '250px',
      height: '48px',
      // readOnly: true,
      onChange: function (checked, value, instance) {
        console.log(checked, value, instance);
      },
      // appendTo: '#myselect',
      //readOnly:true,
      //autoHide: false
    }
  );




</script>



</html>