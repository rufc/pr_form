<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Грудная клетка</title>
  <link rel="stylesheet" type="text/css" href="view.css" media="all">
  <script type="text/javascript" src="view.js"></script>
  <link rel="stylesheet" type="text/css" href="msfmultiselect.css" />
  <script src="msfmultiselect.js"></script>





  <script>
    function testVariable() {
      debugger

      let result_list = [];
      if (document.getElementById("list").length > 0) {
        for (let i = 0; i < document.getElementById("list").length; i++) {
          let option = document.getElementById("list").options[i];
          if (option.selected) {
            result_list += option.value;
          }
        }
      }

      proekcia = [
        "На обзорной рентгенограмме органов грудной клетки в прямой проекции",
        "На обзорных рентгенограммах органов грудной клетки в двух проекциях",
        "На обзорной флюорограмме органов грудной клетки в прямой проекции",
        "На обзорных флюорограммах органов грудной клетки в двух проекциях"
      ];

      ris = ["не изменён", "без особенностей", "компримирован", "усилен в прикорневых отделах"];

      ris2 = ["пневмосклероза в базальных отделах", "умеренного пневмофиброза в базальных отделах", "центрального венозного застоя", "интерстициального компонента"];

      bones_list = [
        "дегенеративно-дистрофические изменения грудного отдела позвоночника",
        "грудной отдел позвоночника легко сколиотически деформирован",
        "грудной отдел позвоночника сколиотически деформирован",
        "консолидированные переломы ребер VI, VII, VIII справа, VI, VII, VIII слева",
        "консолидированный перелом VI ребра справа"
      ]

      add_list = [
        "С обеих сторон неравномерно уплотнена апикальная плевра",
        "С обеих сторон затенена апикальная плевра",
        "Обызвествеление реберных хрящей",
        "Состояние после оперативного вмешательства"
      ]

      // conclusion = ["рентген-признаки", "начальных проявлений остеоартроза", "остеоартроза", "деформирующего остеоартроза", "правого", "левого", "коленного сустава", "правого и левого", "коленных суставов", "I", "II", "III", "IV", "стадии (по J. Kellgren & J. Lawrence)", "рентген-данных за патологические изменения", "не получено"];


      let proekcia_itog = "";
      if (result_list.includes("rg_2x")) {
        proekcia_itog = proekcia[1];
      } else if (result_list.includes("flg_1x")) {
        proekcia_itog = proekcia[2];
      } else if (result_list.includes("flg_2x")) {
        proekcia_itog = proekcia[3];
      } else {
        proekcia_itog = proekcia[0];
      }

      proekcia_itog += " ";


      let ris_start = "лёгочный рисунок";
      let ris_itog = "";
      let ris_izm_itog = "";
      let izm;


      if (result_list.includes("pnevmoscler")) {
        izm = true;
        ris_izm_itog = ris2[0];
      } else if (result_list.includes("um_pnev")) {
        ris_izm_itog = ris2[1];
        izm = true;
      }

      if (result_list.includes("zastoy")) {
        if (ris_izm_itog > "") {
          ris_izm_itog += ", " + ris2[2];
        } else {
          ris_izm_itog += ris2[2];
        }
        izm = true;
      }

      if (result_list.includes("inter")) {
        if (ris_izm_itog > "") {
          ris_izm_itog += ", " + ris2[3];
        } else {
          ris_izm_itog += ris2[3];
        }
        izm = true;
      }

      if (result_list.includes("bo")) {
        ris_itog = " " + ris[1];
        ris_izm_itog = "";
      } else if (result_list.includes("komp")) {
        ris_itog = " " + ris[2];
        if (izm == true) {
          ris_itog += ", изменён за счёт ";
        }
      } else if (result_list.includes("usil")) {
        ris_itog = " " + ris[3];
        if (izm == true) {
          ris_itog += ", изменён за счёт ";
        }
      } else {
        if (izm != true) {
          ris_itog = " не изменён";
          ris_izm_itog = "";
        } else {
          ris_itog = " изменён за счёт ";
        }
      }


      ris_itog = ris_start + ris_itog + ris_izm_itog + ". ";


      let kor_itog;
      let kor_start = "Корни лёгких";
      let kor_itog1;
      let kor_itog2;
      let kor_itog3;
      let kor_side;
      let kor_side_flag;

      if (result_list.includes("kor_r")) {
        kor_side = " " + "справа";
      } else if (result_list.includes("kor_l")) {
        kor_side = " " + "слева";
      } else {
        kor_side = "";
      }

      if (kor_side > "") {
        kor_side_flag = true;
      }

      if (result_list.includes("kor_um")) {
        kor_itog1 = "умеренно расширены";
      } else if (result_list.includes("kor_ras")) {
        kor_itog1 = "расширены";
      } else {
        kor_itog1 = "не расширены";
      }

      if (result_list.includes("str_soh")) {
        kor_itog2 = "структура сохранена";
      } else if (result_list.includes("malo")) {
        kor_itog2 = "малоструктурные";
      } else if (result_list.includes("nestr")) {
        kor_itog2 = "неструктурные";
      } else {
        kor_itog2 = "структурные";
      }

      if (result_list.includes("kor_upl")) {
        kor_itog3 = ", " + "уплотнены";
        if (kor_side_flag) {
          kor_itog3 = ", " + "уплотнён";
        }
      } else {
        kor_itog3 = "";
      }

      if (result_list.includes("kor_ner_nech")) {
        kor_itog3 = kor_itog3 + ", " + "с нечёткими и неровными контурами";
      }
      if (result_list.includes("kor_polic")) {
        kor_itog3 = kor_itog3 + ", " + "с полицикличными контурами";
      }

      kor_itog = kor_start + " " + kor_itog1 + ", " + kor_itog2 + kor_itog3 + kor_side + ". ";


      let ochag_start = "Лёгочные поля"
      let ochag_itog;
      if (result_list.includes("ochag_upl")) {
        ochag_itog = "плотная очаговая тень в среднем отделе правого легкого";
      } else if (result_list.includes("ochag_zat")) {
        ochag_itog = "очаговое затенение в проекции s8 левого легкого";
      } else {
        ochag_itog = "без видимых очаговых изменений"
      }

      let inf_itog;
      if (result_list.includes("sgush")) {
        inf_itog = "сгущение в медиобазальном отделе левого легкого";
      } else if (result_list.includes("neo_snizh")) {
        inf_itog = "неоднородное снижение пневматизации в проекции s6 левого";
      } else if (result_list.includes("neo_upl")) {
        inf_itog = "неоднородные уплотнения легочной ткани в проекции s6 правого";
      } else {
        if (ochag_itog.includes("без видимых очаговых")) {
          inf_itog = "и инфильтративных изменений";
        } else {
          inf_itog = "без видимых инфильтративных изменений";
        }
      }

      if (inf_itog.includes("и инфильтративных изменений")) {
        inf_itog = " " + inf_itog + ". ";
        ochag_itog = ochag_start + " " + ochag_itog;
      } else {
        inf_itog = ", " + inf_itog + ". ";
        ochag_itog = ochag_start + ": " + ochag_itog;
      }


      let kup_itog = "";
      let kup_start = "Купол диафрагмы";
      let kup_side = "";
      let kup_itog2 = "";
      let kup_itog3 = "";


      if (result_list.includes("kup_dost")) {
        kup_itog = "достаточно четкий, ровный";
      } else if (!result_list.includes("kup")) {
        kup_itog = "четкий, ровный";
      } else {
        if (result_list.includes("kup_nech_ner")) {
          kup_itog = "нечеткий, неровный";
        } else if (result_list.includes("kup_zat")) {
          kup_itog = "затенен";
        }

        if (result_list.includes("kup_nez_rel")) {
          kup_itog2 += "с признаками незначительной релаксации";
          if (kup_itog > "") {
            kup_itog2 = ", " + kup_itog2;
          }
        } else if (result_list.includes("kup_rel")) {
          kup_itog2 += "с признаками релаксации";
          if (kup_itog > "") {
            kup_itog2 = ", " + kup_itog2;
          }
        } else {
          kup_itog2 += "";
        }

        if (result_list.includes("kup_spa")) {
          kup_itog3 += "с признаками плевро-диафрагмальных спаек";
          if (kup_itog2 > "") {
            kup_itog3 = ", " + kup_itog3;
          }
        } else {
          kup_itog3 += "";
        }

        if (result_list.includes("kup_right")) {
          kup_side = " " + "справа";
        } else if (result_list.includes("kup_left")) {
          kup_side = " " + "слева";
        } else {
          kup_side = "";
        }
      }

      kup_itog = kup_start + " " + kup_itog + kup_itog2 + kup_itog3 + kup_side + ". ";


      let sin1 = "";
      let sin2 = "";
      let sin_side = "";
      let sin_itog;
      let sin_start = "Плевро-диафрагмальные синусы"

      if (result_list.includes("sin_obl")) {
        sin1 = ": " + "облитерирован";
      } else if (result_list.includes("sin_zaten")) {
        sin1 = ": " + "затенён";
      } else {
        sin1 = " " + "свободные в видимых отделах";
      }

      if (sin1 != " " + "свободные в видимых отделах") {
        if (result_list.includes("sin_later")) {
          sin2 = " " + "латеральный реберно-диафрагмальный синус";
        } else if (result_list.includes("sin_lat_zad")) {
          sin2 = " " + "латеральный и задний плевро-диафрагмальные синусы";
        } else {
          sin2 = "";
        }
      }


      if (result_list.includes("sin_right")) {
        sin_side = " " + "справа";
        if (result_list.includes("sin_lat_zad") && result_list.includes("sin_obl")) {
          sin1 = ": " + "облитерированы";
        } else if (result_list.includes("sin_lat_zad") && result_list.includes("sin_zaten")) {
          sin1 = ": " + "затенены";
        }
      } else if (result_list.includes("sin_left")) {
        sin_side = " " + "слева";
        if (result_list.includes("sin_lat_zad") && result_list.includes("sin_obl")) {
          sin1 = ": " + "облитерированы";
        } else if (result_list.includes("sin_lat_zad") && result_list.includes("sin_zaten")) {
          sin1 = ": " + "затенены";
        }
      } else if (result_list.includes("sin_oba")) {
        if (result_list.includes("sin_obl")) {
          sin1 = ": " + "облитерированы";
        } else if (result_list.includes("sin_zaten")) {
          sin1 = ": " + "затенены";
        }
        if (result_list.includes("sin_later")) {
          sin2 = " " + "латеральные реберно-диафрагмальные синусы";
        }
      } else {
        sin_side = "";
      }
      sin_itog = sin_start + sin1 + sin2 + sin_side + ". ";


      let cardio_itog = "";
      let cardio_start = "Границы сердца ";
      let cardio_side = "";

      if (result_list.includes("cardio_um_ras")) {
        cardio_itog = "умеренно расширены";
      } else if (result_list.includes("cardio_ras")) {
        cardio_itog = "расширены";
      } else if (result_list.includes("cardio_vir_ras")) {
        cardio_itog = "выражено расширены";
      } else {
        cardio_itog = "не расширены";
      }

      if (cardio_itog != "не расширены") {
        if (result_list.includes("cardio_l")) {
          cardio_side = " влево";
        } else if (result_list.includes("cardio_pop")) {
          cardio_side = " в поперечнике";
        }
      }

      cardio_itog = cardio_start + cardio_itog + cardio_side + ". ";


      let aorta_itog = "";
      let aorta_start = "Аорта ";

      if (result_list.includes("ao_bezos")) {
        aorta_itog = "без особенностей";
      } else if (result_list.includes("ao_ud")) {
        aorta_itog = "удлинена";
      } else if (result_list.includes("ao_frag")) {
        aorta_itog = "фрагментарно кальцинирована";
      } else if (result_list.includes("ao_calc")) {
        aorta_itog = "кальцинирована";
      } else {
        aorta_itog = "не изменена";
      }

      aorta_itog = aorta_start + aorta_itog + ". "


      let bones_itog = "";
      let bones_start = "Костные структуры: ";

      for (i = 0; i < bones_list.length; ++i) {
        if (result_list.includes(bones_list[i])) {
          bones_itog += bones_list[i] + ", ";
        }
      }

      if (bones_itog == "") {
        bones_itog = 'без особенностей. ';
        bones_start = "Костные структуры ";
      }

      bones_itog = bones_start + bones_itog.replace(/,(?![^,]*,)/m, '.');


      let add_itog = "";

      for (i = 0; i < add_list.length; ++i) {
        if (result_list.includes(add_list[i])) {
          add_itog += add_list[i] + ". ";
        }
      }


      let conc_itog = "";
      let conc_start = "Заключение: ";

      if (result_list.includes("conc_pat")) {
        conc_itog = "рентген-данных за патологические изменения органов грудной полости не получено";
      } else if (result_list.includes("conc_svej_pat")) {
        conc_itog = 'рентген-данных за "свежие" патологические изменения органов грудной полости не получено';
      } else if (result_list.includes("conc_pred")) {
        conc_itog = "органы грудной полости в пределах возрастной нормы";
      } else if (result_list.includes("conc_voz")) {
        conc_itog = "рентген-признаки возрастных изменений органов грудной полости";
      } else if (result_list.includes("conc_inf_net")) {
        conc_itog = "рентген-данных за инфильтративные изменения в легких не получено";
      } else {
        conc_itog = "органы грудной полости без видимой патологии";
      }

      conc_itog = conc_start + conc_itog + ". ";



      document.getElementById("show").innerText = proekcia_itog + ris_itog + kor_itog + ochag_itog + inf_itog + kup_itog + sin_itog + cardio_itog + aorta_itog + bones_itog + add_itog + conc_itog;

      // pro_okno = document.getElementById("pro").innerHTML;

    }


  </script>





</head>

<body id="main_body">

  <div id="form_container">

    <div id="form_item_1">



      <form id="form_48871" class="appnitro" method="post" action="">
        <div class="form_description">
          <h2>Грудная клетка</h2>
          <p><!-- description --></p>
        </div>

        <div class="my_container">


          <div class="my_card">
            <select class="form-control" id="list" name="list" multiple>
              <option disabled>------------ПРОЕКЦИЯ</option>
              <option value="rg_2x">рентген 2х</option>
              <option value="flg_1x">флг 1х</option>
              <option value="flg_2x">флг 2х</option>
              <option disabled>------------ЛЁГОЧНЫЙ РИСУНОК</option>
              <option value="bo">без особенностей</option>
              <option value="komp">компримирован</option>
              <option value="usil">усилен</option>
              <option disabled>------------ИЗМЕНЁН ЗА СЧЁТ</option>
              <option value="pnevmoscler">пневмосклероза</option>
              <option value="um_pnev">умеренного пневмофиброза</option>
              <option value="zastoy">центрального вен застоя</option>
              <option value="inter">интерстициального комп</option>
              <option disabled>------------КОРНИ РАСШИРЕНИЕ</option>
              <option value="kor_um">умеренно расширены</option>
              <option value="kor_ras">расширены</option>
              <option disabled>------------КОРНИ СТРУКТУРА</option>
              <option value="str_soh">структура сохранена</option>
              <option value="malo">малоструктурные</option>
              <option value="nestr">не структурные</option>
              <option disabled>------------КОРНИ КОНТУРЫ</option>
              <option value="kor_upl">уплотнён</option>
              <option value="kor_ner_nech">с нечёткими и неровными</option>
              <option value="kor_polic">с полицикличными</option>
              <option value="kor_r">справа</option>
              <option value="kor_l">слева</option>
              <option disabled>------------ОЧАГИ</option>
              <option value="ochag_upl">очаговое уплотнение</option>
              <option value="ochag_zat">очаговое затенение</option>
              <option disabled>------------ИНФИЛЬТРАЦИЯ</option>
              <option value="sgush">сгущение</option>
              <option value="neo_snizh">неоднородное снижение</option>
              <option value="neo_upl">неоднородные уплотнения</option>
              <option disabled>------------КУПОЛ ДИАФРАГМЫ</option>
              <option value="kup_dost">достаточно чёткий ровный</option>
              <option value="kup_nech_ner">нечёткий неровный</option>
              <option value="kup_zat">затенён</option>
              <option value="kup_nez_rel">незначительная релаксация</option>
              <option value="kup_rel">релаксация</option>
              <option value="kup_spa">спайки</option>
              <option value="kup_right">справа</option>
              <option value="kup_left">слева</option>
              <option disabled>------------ПЛЕВРАЛЬНЫЕ СИНУСЫ</option>
              <option value="sin_obl">облитерирован</option>
              <option value="sin_zaten">затенён</option>
              <option value="sin_later">латеральный</option>
              <option value="sin_lat_zad">латеральный и задний</option>
              <option value="sin_right">справа</option>
              <option value="sin_left">слева</option>
              <option value="sin_oba">с обеих сторон</option>
              <option disabled>------------ГРАНИЦЫ СЕРДЦА</option>
              <option value="cardio_um_ras">умеренно расширены</option>
              <option value="cardio_ras">расширены</option>
              <option value="cardio_vir_ras">выражено расширены</option>
              <option value="cardio_l">влево</option>
              <option value="cardio_pop">в поперечнике</option>
              <option disabled>------------АОРТА</option>
              <option value="ao_bezos">без особенностей</option>
              <option value="ao_ud">удлинена</option>
              <option value="ao_frag">фрагм кальцинирована</option>
              <option value="ao_calc">кальцинирована</option>
              <option disabled>------------КОСТНЫЕ СТРУКТУРЫ</option>
              <option value="дегенеративно-дистрофические изменения грудного отдела позвоночника">дег-дистрофические
              </option>
              <option value="грудной отдел позвоночника легко сколиотически деформирован">легкий сколиоз</option>
              <option value="грудной отдел позвоночника сколиотически деформирован">сколиоз</option>
              <option value="консолидированный перелом VI ребра справа">консолид перелом</option>
              <option value="консолидированные переломы ребер VI, VII, VIII справа, VI, VII, VIII слева">консолид
                переломы
              </option>
              <option disabled>------------ДОПОЛНЕНИЯ</option>
              <option value="С обеих сторон неравномерно уплотнена апикальная плевра">АПИК</option>
              <option value="С обеих сторон затенена апикальная плевра">АПИК ЗАТ</option>
              <option value="Обызвествеление реберных хрящей">ХРЯЩ</option>
              <option value="Состояние после оперативного вмешательства">ОПЕР</option>
              <option disabled>------------ЗАКЛЮЧЕНИЕ</option>
              <option value="conc_pat">ПАТ</option>
              <option value="conc_svej_pat">СВЕЖ ПАТ</option>
              <option value="conc_pred">ПРЕД</option>
              <option value="conc_voz">ВОЗ</option>
              <option value="conc_inf_net">ИНФ не пол</option>
            </select>
          </div>

        </div>


      </form>


    </div>





    <div id="form_item_2">


      <div class="page">
        <nav class="page__menu menu">
          <ul class="menu__list r-list">
            <li class="menu__group"><a href="thorax.html" class="menu__link r-link text-underlined">ОГК</a></li>
            <li class="menu__group"><a href="knee.html" class="menu__link r-link text-underlined">КОЛЕНО</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
          </ul>
        </nav>
      </div>


      <li class="buttons">
        <input type="hidden" name="form_id" value="48871" />
        <input id="saveForm" class="button_text" type="submit" name="submit" value="Вывод" onclick="testVariable()" />
      </li>




      <textarea variable="yname" id="show" class="mytextarea" rows="20" cols="70"></textarea>




    </div>






  </div>



</body>

<script>

  var list = new MSFmultiSelect(
    document.querySelector('#list'),
    {
      theme: 'theme2',
      selectAll: true,
      searchBox: true,
      width: '700px',
      height: '80px',
      // readOnly: true,
      onChange: function (checked, value, instance) {
        console.log(checked, value, instance);
      },
      // appendTo: '#myselect',
      autoHide: false
    }
  )



</script>



</html>