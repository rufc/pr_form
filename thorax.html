<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Грудная клетка</title>
  <link rel="stylesheet" type="text/css" href="view.css" media="all">
  <script type="text/javascript" src="view.js"></script>
  <link rel="stylesheet" type="text/css" href="msfmultiselect.css" />
  <script src="msfmultiselect.js"></script>
  <script type="text/javascript" src="autorep.js"></script>
  <script type="text/javascript" src="http://yastatic.net/jquery/2.1.3/jquery.min.js"></script>




  <script>
    function testVariable() {
      debugger

      let result_list = [];
      if (document.getElementById("list").length > 0) {
        for (let i = 0; i < document.getElementById("list").length; i++) {
          let option = document.getElementById("list").options[i];
          if (option.selected) {
            result_list += option.value;
          }
        }
      }

      proekcia = [
        "На обзорной рентгенограмме органов грудной клетки в прямой проекции",
        "На обзорных рентгенограммах органов грудной клетки в двух проекциях",
        "На обзорной флюорограмме органов грудной клетки в прямой проекции",
        "На обзорных флюорограммах органов грудной клетки в двух проекциях",
        "с разворотом вправо",
        "с умеренным разворотом вправо",
        "с выраженным разворотом вправо",
        "на выдохе",
        "на неполном вдохе",
        "с артефактами от одежды",
        "с динамическими артефактами",
        "c повышенной жёсткостью",
        "c повышенной мягкостью",
      ];

      ris = [
        "не изменён",
        "без особенностей",
        "компримирован",
        "усилен в прикорневых отделах"
      ];

      ris2 = [
        "пневмосклероза в базальных отделах",
        "пневмофиброза в базальных отделах",
        "центрального венозного застоя",
        "интерстициального компонента"
      ];

      korni = [
        "умеренно расширены",
        "расширен справа",
        "структура сохранена",
        "малоструктурные",
        "не структурные",
        "уплотнён справа",
        "с нечёткими и неровными контурами справа",
        "с полицикличными контурами справа"
      ];

      och = [
        "плотная очаговая тень в s6 правого лёгкого",
        "кальцинированный очаг в s6 правого лёгкого",
        "очаговая тень средней плотности в проекции верхней доли правого лёгкого",
      ]

      inf = [
        "неоднородное снижение пневматизации в s8 правого лёгкого",
        "неоднородные уплотнения лёгочной ткани в s8 правого лёгкого"
      ]

      bones_list = [
        "дегенеративно-дистрофические изменения грудного отдела позвоночника",
        "грудной отдел позвоночника легко сколиотически деформирован",
        "грудной отдел позвоночника сколиотически деформирован",
        "консолидированные переломы ребер VI, VII, VIII справа, VI, VII, VIII слева",
        "консолидированный перелом VI ребра справа"
      ]

      add_list = [
        "С обеих сторон неравномерно уплотнена апикальная плевра",
        "С обеих сторон затенена апикальная плевра",
        "Обызвествеление реберных хрящей",
        "Состояние после оперативного вмешательства"
      ]

      aorta_list = [
        "без особеннoстей",   //английская о чтобы не было повтора
        "удлинена",
        "извитая",
        "уплотнена",
        "фрагментарно кальциниpована", //английская p чтобы не было повтора
        "кальцинирована"
      ]

      // ПРОЕКЦИЯ

      let proekcia_itog = "";
      for (i = 0; i < proekcia.length; ++i) {
        if (result_list.includes(proekcia[i])) {
          proekcia_itog += proekcia[i] + ", ";
        }
      }
      proekcia_itog = proekcia_itog.replace(/,(?![^,]*,)/m, '');

      // ЛЁГОЧНЫЙ РИСУНОК

      let ris_start = "лёгочный рисунок ";
      let ris_itog = "";
      for (i = 0; i < ris.length; ++i) {
        if (result_list.includes(ris[i])) {
          ris_itog += ris[i] + ", ";
        }
      }

      let ris_itog2 = "изменён за счёт ";
      for (i = 0; i < ris2.length; ++i) {
        if (result_list.includes(ris2[i])) {
          ris_itog2 += ris2[i] + ", ";
        }
      }

      if (ris_itog2 == "изменён за счёт ") {
        ris_itog2 = "";
      }

      ris_itog = ris_start + ris_itog + ris_itog2;

      if (ris_itog == "лёгочный рисунок ") {
        ris_itog = "лёгочный рисунок не изменён. ";
      }

      ris_itog = ris_itog.replace(/,(?![^,]*,)/m, '.');

      // КОРНИ ЛЁГКИХ

      let korni_itog = "";
      let korni_start = "Корни лёгких: ";
      for (i = 0; i < korni.length; ++i) {
        if (result_list.includes(korni[i])) {
          korni_itog += korni[i] + ", ";
        }
      }

      korni_itog = korni_start + korni_itog.replace(/,(?![^,]*,)/m, '.');

      if (korni_itog == "Корни лёгких: ") {
        korni_itog = "Корни лёгких не расширены, структурные. ";
      }

      // ЛЁГОЧНЫЕ ПОЛЯ

      let polya_start = "Лёгочные поля: "
      let ochag_itog = "";
      for (i = 0; i < och.length; ++i) {
        if (result_list.includes(och[i])) {
          ochag_itog += och[i] + ", ";
        }
      }

      let inf_itog = "";
      for (i = 0; i < inf.length; ++i) {
        if (result_list.includes(inf[i])) {
          inf_itog += inf[i] + ", ";
        }
      }

      if (inf_itog == "" && ochag_itog == "") {
        polya_start = "Лёгочные поля без видимых очаговых и инфильтративных изменений. "
        ochag_itog = ""
        inf_itog = "";
      } else {
        if (ochag_itog == "") {
          ochag_itog = "без видимых очаговых изменений, ";
        }
        if (inf_itog == "") {
          inf_itog = "без видимых инфильтративных изменений, ";
        }
      }

      polya_itog = polya_start + ochag_itog + inf_itog.replace(/,(?![^,]*,)/m, '.');




      let kup_itog = "";
      let kup_start = "Купол диафрагмы";
      let kup_side = "";
      let kup_itog2 = "";
      let kup_itog3 = "";


      if (result_list.includes("kup_dost")) {
        kup_itog = "достаточно четкий, ровный";
      } else if (!result_list.includes("kup")) {
        kup_itog = "четкий, ровный";
      } else {
        if (result_list.includes("kup_nech_ner")) {
          kup_itog = "нечеткий, неровный";
        } else if (result_list.includes("kup_zat")) {
          kup_itog = "затенен";
        }

        if (result_list.includes("kup_nez_rel")) {
          kup_itog2 += "с признаками незначительной релаксации";
          if (kup_itog > "") {
            kup_itog2 = ", " + kup_itog2;
          }
        } else if (result_list.includes("kup_rel")) {
          kup_itog2 += "с признаками релаксации";
          if (kup_itog > "") {
            kup_itog2 = ", " + kup_itog2;
          }
        } else {
          kup_itog2 += "";
        }

        if (result_list.includes("kup_spa")) {
          kup_itog3 += "с признаками плевро-диафрагмальных спаек";
          if (kup_itog2 > "") {
            kup_itog3 = ", " + kup_itog3;
          }
        } else {
          kup_itog3 += "";
        }

        if (result_list.includes("kup_right")) {
          kup_side = " " + "справа";
        } else if (result_list.includes("kup_left")) {
          kup_side = " " + "слева";
        } else {
          kup_side = "";
        }
      }

      kup_itog = kup_start + " " + kup_itog + kup_itog2 + kup_itog3 + kup_side + ". ";


      let sin1 = "";
      let sin2 = "";
      let sin_side = "";
      let sin_itog;
      let sin_start = "Плевро-диафрагмальные синусы"

      if (result_list.includes("sin_obl")) {
        sin1 = ": " + "облитерирован";
      } else if (result_list.includes("sin_zaten")) {
        sin1 = ": " + "затенён";
      } else {
        sin1 = " " + "свободные в видимых отделах";
      }

      if (sin1 != " " + "свободные в видимых отделах") {
        if (result_list.includes("sin_later")) {
          sin2 = " " + "латеральный реберно-диафрагмальный синус";
        } else if (result_list.includes("sin_lat_zad")) {
          sin2 = " " + "латеральный и задний плевро-диафрагмальные синусы";
        } else {
          sin2 = "";
        }
      }


      if (result_list.includes("sin_right")) {
        sin_side = " " + "справа";
        if (result_list.includes("sin_lat_zad") && result_list.includes("sin_obl")) {
          sin1 = ": " + "облитерированы";
        } else if (result_list.includes("sin_lat_zad") && result_list.includes("sin_zaten")) {
          sin1 = ": " + "затенены";
        }
      } else if (result_list.includes("sin_left")) {
        sin_side = " " + "слева";
        if (result_list.includes("sin_lat_zad") && result_list.includes("sin_obl")) {
          sin1 = ": " + "облитерированы";
        } else if (result_list.includes("sin_lat_zad") && result_list.includes("sin_zaten")) {
          sin1 = ": " + "затенены";
        }
      } else if (result_list.includes("sin_oba")) {
        if (result_list.includes("sin_obl")) {
          sin1 = ": " + "облитерированы";
        } else if (result_list.includes("sin_zaten")) {
          sin1 = ": " + "затенены";
        }
        if (result_list.includes("sin_later")) {
          sin2 = " " + "латеральные реберно-диафрагмальные синусы";
        }
      } else {
        sin_side = "";
      }
      sin_itog = sin_start + sin1 + sin2 + sin_side + ". ";


      let cardio_itog = "";
      let cardio_start = "Границы сердца ";
      let cardio_side = "";

      if (result_list.includes("cardio_um_ras")) {
        cardio_itog = "умеренно расширены";
      } else if (result_list.includes("cardio_ras")) {
        cardio_itog = "расширены";
      } else if (result_list.includes("cardio_vir_ras")) {
        cardio_itog = "выражено расширены";
      } else {
        cardio_itog = "не расширены";
      }

      if (cardio_itog != "не расширены") {
        if (result_list.includes("cardio_l")) {
          cardio_side = " влево";
        } else if (result_list.includes("cardio_pop")) {
          cardio_side = " в поперечнике";
        }
      }

      cardio_itog = cardio_start + cardio_itog + cardio_side + ". ";


      // АОРТА

      let aorta_itog = "";
      let aorta_start = "Аорта ";

      for (i = 0; i < aorta_list.length; ++i) {
        if (result_list.includes(aorta_list[i])) {
          aorta_itog += aorta_list[i] + ", ";
        }
      }


      if (aorta_itog == "") {
        aorta_itog = "не изменена. "
      }

      aorta_itog = aorta_itog.replace(/,(?![^,]*,)/m, '.');
      aorta_itog = aorta_start + aorta_itog;


      let bones_itog = "";
      let bones_start = "Костные структуры: ";

      for (i = 0; i < bones_list.length; ++i) {
        if (result_list.includes(bones_list[i])) {
          bones_itog += bones_list[i] + ", ";
        }
      }

      if (bones_itog == "") {
        bones_itog = 'без особенностей. ';
        bones_start = "Костные структуры ";
      }

      bones_itog = bones_start + bones_itog.replace(/,(?![^,]*,)/m, '.');


      let add_itog = "";

      for (i = 0; i < add_list.length; ++i) {
        if (result_list.includes(add_list[i])) {
          add_itog += add_list[i] + ". ";
        }
      }


      let conc_itog = "";
      let conc_start = "Заключение: ";

      if (result_list.includes("conc_pat")) {
        conc_itog = "рентген-данных за патологические изменения органов грудной полости не получено";
      } else if (result_list.includes("conc_svej_pat")) {
        conc_itog = 'рентген-данных за "свежие" патологические изменения органов грудной полости не получено';
      } else if (result_list.includes("conc_pred")) {
        conc_itog = "органы грудной полости в пределах возрастной нормы";
      } else if (result_list.includes("conc_voz")) {
        conc_itog = "рентген-признаки возрастных изменений органов грудной полости";
      } else if (result_list.includes("conc_inf_net")) {
        conc_itog = "рентген-данных за инфильтративные изменения в легких не получено";
      } else {
        conc_itog = "органы грудной полости без видимой патологии";
      }

      conc_itog = conc_start + conc_itog + ". ";



      document.getElementById("show").innerText = proekcia_itog + ris_itog + korni_itog + polya_itog + kup_itog + sin_itog + cardio_itog + aorta_itog + bones_itog + add_itog + conc_itog;

      // pro_okno = document.getElementById("pro").innerHTML;

    }



    function copy_to_clipboard(show) {
      document.getElementById(show).select();
      document.execCommand('copy');
    }




  </script>





</head>

<body id="main_body">

  <div id="form_container">

    <div id="form_item_1">



      <form id="form_48871" class="appnitro" method="post" action="">
        <div class="form_description">
          <h2>Грудная клетка</h2>
          <p><!-- description --></p>
        </div>

        <div class="my_container">


          <div class="my_card">
            <select class="form-control" id="list" name="list" multiple>
              <option disabled>------------ПРОЕКЦИЯ</option>
              <option value="На обзорной рентгенограмме органов грудной клетки в прямой проекции">рентген 1х</option>
              <option value="На обзорных рентгенограммах органов грудной клетки в двух проекциях">рентген 2х</option>
              <option value="На обзорной флюорограмме органов грудной клетки в прямой проекции">флг 1х</option>
              <option value="На обзорных флюорограммах органов грудной клетки в двух проекциях">флг 2х</option>
              <option value="с разворотом вправо">с разворотом</option>
              <option value="с умеренным разворотом вправо">с умеренным разворотом</option>
              <option value="с выраженным разворотом вправо">с выраженным разворотом</option>
              <option value="на выдохе">на выдохе</option>
              <option value="на неполном вдохе">на неполном вдохе</option>
              <option value="с артефактами от одежды">с артефактами от одежды</option>
              <option value="с динамическими артефактами">с динамическими артефактами</option>
              <option value="c повышенной жёсткостью">c повышенной жёсткостью</option>
              <option value="c повышенной мягкостью">c повышенной мягкостью</option>

              <option disabled>------------ЛЁГОЧНЫЙ РИСУНОК</option>
              <option value="без особенностей">без особенностей</option>
              <option value="компримирован">компримирован</option>
              <option value="усилен в прикорневых отделах">усилен в прикорневых отделах</option>
              <option value="пневмосклероза в базальных отделах">пневмосклероз</option>
              <option value="пневмофиброза в базальных отделах">пневмофиброз</option>
              <option value="центрального венозного застоя">центральный венозный застой</option>
              <option value="интерстициального компонента">интерстициальный комп</option>

              <option disabled>------------КОРНИ ЛЁГКИХ</option>
              <option value="умеренно расширены">умеренно расширены</option>
              <option value="расширен справа">расширен справа</option>
              <option value="структура сохранена">структура сохранена</option>
              <option value="малоструктурные">малоструктурные</option>
              <option value="не структурные">не структурные</option>
              <option value="уплотнён справа">уплотнён справа</option>
              <option value="с нечёткими и неровными контурами справа">с нечёткими и неровными контурами справа</option>
              <option value="с полицикличными контурами справа">с полицикличными контурами справа</option>

              <option disabled>------------ОЧАГИ</option>
              <option value="плотная очаговая тень в s6 правого лёгкого">плотный очаг</option>
              <option value="очаговая тень средней плотности в проекции верхней доли правого лёгкого">очаговая тень
                средней</option>
              <option value="кальцинированный очаг в s6 правого лёгкого">кальцинированный очаг</option>

              <option disabled>------------ИНФИЛЬТРАЦИЯ</option>
              <option value="неоднородное снижение пневматизации в s8 правого лёгкого">снижение пневматизации</option>
              <option value="неоднородные уплотнения лёгочной ткани в s8 правого лёгкого">неоднородные уплотнения
              </option>

              <option disabled>------------КУПОЛ ДИАФРАГМЫ</option>
              <option value="kup_dost">достаточно чёткий ровный</option>
              <option value="kup_nech_ner">нечёткий неровный</option>
              <option value="kup_zat">затенён</option>
              <option value="kup_nez_rel">незначительная релаксация</option>
              <option value="kup_rel">релаксация</option>
              <option value="kup_spa">спайки</option>
              <option value="kup_right">справа</option>
              <option value="kup_left">слева</option>
              <option disabled>------------ПЛЕВРАЛЬНЫЕ СИНУСЫ</option>
              <option value="sin_obl">облитерирован</option>
              <option value="sin_zaten">затенён</option>
              <option value="sin_later">латеральный</option>
              <option value="sin_lat_zad">латеральный и задний</option>
              <option value="sin_right">справа</option>
              <option value="sin_left">слева</option>
              <option value="sin_oba">с обеих сторон</option>
              <option disabled>------------ГРАНИЦЫ СЕРДЦА</option>
              <option value="cardio_um_ras">умеренно расширены</option>
              <option value="cardio_ras">расширены</option>
              <option value="cardio_vir_ras">выражено расширены</option>
              <option value="cardio_l">влево</option>
              <option value="cardio_pop">в поперечнике</option>
              <option disabled>------------АОРТА</option>
              <option value="без особеннoстей">без особенноcтей</option>
              <option value="удлинена">удлинена</option>
              <option value="извитая">извитая</option>
              <option value="уплотнена">уплотнена</option>
              <option value="фрагментарно кальциниpована">фрагментарно кальцинирована</option>
              <option value="кальцинирована">кальцинирована</option>
              <option disabled>------------КОСТНЫЕ СТРУКТУРЫ</option>
              <option value="дегенеративно-дистрофические изменения грудного отдела позвоночника">
                дегенеративно-дистрофические</option>
              <option value="грудной отдел позвоночника легко сколиотически деформирован">легкая сколиотическая</option>
              <option value="грудной отдел позвоночника сколиотически деформирован">сколиотическая</option>
              <option value="консолидированный перелом VI ребра справа">консолидированный перелом</option>
              <option value="консолидированные переломы ребер VI, VII, VIII справа, VI, VII, VIII слева">
                консолидированные переломы</option>
              <option disabled>------------ДОПОЛНЕНИЯ</option>
              <option value="С обеих сторон неравномерно уплотнена апикальная плевра">уплотнена апикальная</option>
              <option value="С обеих сторон затенена апикальная плевра">затенена апикальная</option>
              <option value="Обызвествеление реберных хрящей">обызвествеление хрящей</option>
              <option value="Состояние после оперативного вмешательства">состояние после оперативного</option>
              <option disabled>------------ЗАКЛЮЧЕНИЕ</option>
              <option value="conc_pat">ПАТ</option>
              <option value="conc_svej_pat">СВЕЖ ПАТ</option>
              <option value="conc_pred">ПРЕД</option>
              <option value="conc_voz">ВОЗ</option>
              <option value="conc_inf_net">ИНФ не пол</option>
            </select>
          </div>

        </div>


      </form>


    </div>





    <div id="form_item_2">


      <div class="page">
        <nav class="page__menu menu">
          <ul class="menu__list r-list">
            <li class="menu__group"><a href="thorax.html" class="menu__link r-link text-underlined">ОГК</a></li>
            <li class="menu__group"><a href="knee.html" class="menu__link r-link text-underlined">КОЛЕНО</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
            <li class="menu__group"><a href="#0" class="menu__link r-link text-underlined">#</a></li>
          </ul>
        </nav>
      </div>
      <br>


      <textarea variable="yname" id="show" class="mytextarea" rows="22" cols="46"></textarea>

      <li class="buttons">
        <input id="saveForm" class="my_btn-new" type="submit" name="submit" value="Вывод" onclick="testVariable()" />
        <input type="button" class="my_btn-new" value="Скопировать" onclick="copy_to_clipboard('show');">
      </li>

    </div>



  </div>



</body>

<script>

  var list = new MSFmultiSelect(
    document.querySelector('#list'),
    {
      theme: 'theme2',
      selectAll: true,
      searchBox: true,
      width: '700px',
      height: '80px',
      // readOnly: true,
      onChange: function (checked, value, instance) {
        console.log(checked, value, instance);
      },
      // appendTo: '#myselect',
      autoHide: false
    }
  )



</script>



</html>